<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/mesa2022_hmxb/libs/katex/katex.min.css"> <link rel=stylesheet  href="/mesa2022_hmxb/libs/highlight/github.min.css"> <link rel=stylesheet  href="/mesa2022_hmxb/css/franklin.css"> <link rel=stylesheet  href="/mesa2022_hmxb/css/poole_hyde.css"> <link rel=stylesheet  href="/mesa2022_hmxb/css/extras.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=icon  href="/mesa2022_hmxb/assets/favicon.png"> <title>Minilab 1: Mass transfer schemes in binary</title> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <h2><a href="/mesa2022_hmxb/">Mass transfer in HMXBs with MESA</a></h2> <img src="/mesa2022_hmxb/assets/PobreEstrella.png"/> <p class=lead ></p> </div> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/mesa2022_hmxb/">Home</a> <a class="sidebar-nav-item " href="/mesa2022_hmxb/minilab1/"><span style="color:brown">Minilab 1:</span> Mass transfer schemes in MESA</a> <a class="sidebar-nav-item " href="/mesa2022_hmxb/minilab2/"><span style="color:brown">Minilab 2:</span> Future evolution of HMXBs</a> <a class="sidebar-nav-item " href="/mesa2022_hmxb/maxilab/"><span style="color:brown">Maxilab</span>: Formation of GW sources through RLOF</a> </nav> <p>&copy; Pablo Marchant.</p> </div> </div> <div class="content container"> <div class=franklin-content > <h1 id=minilab_1_mass_transfer_schemes_in_mesa ><a href="#minilab_1_mass_transfer_schemes_in_mesa" class=header-anchor >Minilab 1: Mass transfer schemes in MESA</a></h1> <div class=franklin-toc ><ol><li><a href="#introduction">Introduction</a><li><a href="#basic_structure_of_a_binary_work_directory">Basic structure of a <code>binary</code> work directory</a><ol><li><a href="#inlists_in_a_binary_work_folder">Inlists in a <code>binary</code> work folder</a><li><a href="#the_src_folder_run_binary_extrasf90_and_run_star_extrasf90">The src folder: <code>run_binary_extras.f90</code> and <code>run_star_extras.f90</code></a><li><a href="#running_a_binary_model">Running a <code>binary</code> model</a></ol><li><a href="#adjusting_the_work_directory">Adjusting the work directory</a><ol><li><a href="#modifications_to_binary_controls_section_of_inlist_project">Modifications to <code>@binary_controls</code> section of <code>inlist_project</code></a><li><a href="#modifications_to_controls_section_of_inlist1">Modifications to <code>@controls</code> section of <code>inlist1</code></a><li><a href="#modifications_to_pgstar_section_of_inlist1">Modifications to <code>@pgstar</code> section of <code>inlist1</code></a></ol><li><a href="#onto_the_minilab">Onto the minilab&#33;</a></ol></div> <h2 id=introduction ><a href="#introduction" class=header-anchor >Introduction</a></h2> <p>In the first minilab of this session we will work on constructing a basic setup to model a single-degenerate binary system consisting of a black hole and a star. We will also study how different prescriptions to compute mass transfer rates can impact observable properties of the system. The structure of the stellar component in such a simulation is modelled by MESA, while the black hole is only modeled as a sink. In particular we will be studying cases in which the luminosity released by the compact object from accretion is much larger than its Eddington luminosity,</p> <span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mrow><msub><mi>L</mi><mrow><mi mathvariant=normal >e</mi><mi mathvariant=normal >d</mi><mi mathvariant=normal >d</mi></mrow></msub><mo>=</mo><mfrac><mrow><mn>4</mn><mi>π</mi><mi>G</mi><msub><mi>M</mi><mrow><mi mathvariant=normal >B</mi><mi mathvariant=normal >H</mi></mrow></msub><mi>c</mi></mrow><mi>κ</mi></mfrac></mrow><annotation encoding="application/x-tex">L_\mathrm{edd}=\frac{4\pi G M_\mathrm{BH}c}{\kappa}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.8333em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal">L</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">edd</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:2.0463em;vertical-align:-0.686em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:1.3603em;"><span style="top:-2.314em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class="mord mathnormal">κ</span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >4</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord mathnormal">G</span><span class=mord ><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">BH</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">c</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span> <p>where <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>M</mi><mrow><mi mathvariant=normal >B</mi><mi mathvariant=normal >H</mi></mrow></msub></mrow><annotation encoding="application/x-tex">M_\mathrm{BH}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.8333em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">BH</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is the mass of the black hole, and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>κ</mi></mrow><annotation encoding="application/x-tex">\kappa</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.4306em;"></span><span class="mord mathnormal">κ</span></span></span></span> is the opacity of accreted material. A black hole accreting through a disk is expected to have a luminosity proportional to its accretion rate, <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mrow><mi mathvariant=normal >a</mi><mi mathvariant=normal >c</mi><mi mathvariant=normal >c</mi></mrow></msub><mo>=</mo><mi>η</mi><msub><mover accent=true ><mi>M</mi><mo>˙</mo></mover><mrow><mi mathvariant=normal >a</mi><mi mathvariant=normal >c</mi><mi mathvariant=normal >c</mi></mrow></msub><msup><mi>c</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">L_\mathrm{acc}=\eta \dot{M}_\mathrm{acc}c^2</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.8333em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal">L</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">acc</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:1.1146em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class=mord ><span class="mord accent"><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.9202em;"><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span><span style="top:-3.2523em;"><span class=pstrut  style="height:3em;"></span><span class=accent-body  style="left:-0.0556em;"><span class=mord >˙</span></span></span></span></span></span></span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">acc</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mord ><span class="mord mathnormal">c</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>, where <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi><mo>≃</mo><mn>0.06</mn><mo>−</mo><mn>0.42</mn></mrow><annotation encoding="application/x-tex">\eta\simeq 0.06-0.42</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.6582em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >≃</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:0.7278em;vertical-align:-0.0833em;"></span><span class=mord >0.06</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222em;"></span></span><span class=base ><span class=strut  style="height:0.6444em;"></span><span class=mord >0.42</span></span></span></span> depends on the spin of the black hole. Assuming only electron-scattering opacity, <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>κ</mi><mo>≃</mo><mn>0.2</mn><mo stretchy=false >(</mo><mn>1</mn><mo>+</mo><msub><mi>X</mi><mi mathvariant=normal >s</mi></msub><mo stretchy=false >)</mo><mtext> </mtext><mrow><mi mathvariant=normal >c</mi><msup><mi mathvariant=normal >m</mi><mn>2</mn></msup><mtext> </mtext><msup><mi mathvariant=normal >g</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow></mrow><annotation encoding="application/x-tex">\kappa\simeq 0.2(1+X_\mathrm{s})\;\mathrm{cm^2\;g^{-1}}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.4637em;"></span><span class="mord mathnormal">κ</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >≃</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mord >0.2</span><span class=mopen >(</span><span class=mord >1</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222em;"></span></span><span class=base ><span class=strut  style="height:1.0641em;vertical-align:-0.25em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">s</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mclose >)</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mord ><span class="mord mathrm">c</span><span class=mord ><span class="mord mathrm">m</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mord ><span class="mord mathrm" style="margin-right:0.01389em;">g</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathrm mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span>, one can then determine at which mass transfer rate the resulting luminosity would reach <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mrow><mi mathvariant=normal >e</mi><mi mathvariant=normal >d</mi><mi mathvariant=normal >d</mi></mrow></msub><mo separator=true >,</mo></mrow><annotation encoding="application/x-tex">L_\mathrm{edd},</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.8778em;vertical-align:-0.1944em;"></span><span class=mord ><span class="mord mathnormal">L</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">edd</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mpunct >,</span></span></span></span></p> <span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mrow><msub><mover accent=true ><mi>M</mi><mo>˙</mo></mover><mrow><mi mathvariant=normal >e</mi><mi mathvariant=normal >d</mi><mi mathvariant=normal >d</mi></mrow></msub><mo>=</mo><mn>2.6</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>7</mn></mrow></msup><mrow><mo fence=true >(</mo><mfrac><msub><mi>M</mi><mrow><mi mathvariant=normal >B</mi><mi mathvariant=normal >H</mi></mrow></msub><mrow><mn>10</mn><mtext> </mtext><msub><mi>M</mi><mo>⊙</mo></msub></mrow></mfrac><mo fence=true >)</mo></mrow><msup><mrow><mo fence=true >(</mo><mfrac><mrow><mn>1</mn><mo>+</mo><msub><mi>X</mi><mi mathvariant=normal >s</mi></msub></mrow><mn>1.7</mn></mfrac><mo fence=true >)</mo></mrow><mrow><mo>−</mo><mn>1</mn></mrow></msup><msup><mrow><mo fence=true >(</mo><mfrac><mi>η</mi><mn>0.1</mn></mfrac><mo fence=true >)</mo></mrow><mrow><mo>−</mo><mn>1</mn></mrow></msup><mtext> </mtext><msub><mi>M</mi><mo>⊙</mo></msub><mtext> </mtext><msup><mrow><mi mathvariant=normal >y</mi><mi mathvariant=normal >r</mi></mrow><mrow><mo>−</mo><mn>1</mn></mrow></msup><mi mathvariant=normal >.</mi></mrow><annotation encoding="application/x-tex">\dot{M}_\mathrm{edd}=2.6\times 10^{-7}\left(\frac{M_\mathrm{BH}}{10\;M_\odot}\right) \left(\frac{1+X_\mathrm{s}}{1.7}\right)^{-1}\left(\frac{\eta}{0.1}\right)^{-1}\;M_\odot\;\mathrm{yr}^{-1}.</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.0702em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord accent"><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.9202em;"><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span><span style="top:-3.2523em;"><span class=pstrut  style="height:3em;"></span><span class=accent-body  style="left:-0.0556em;"><span class=mord >˙</span></span></span></span></span></span></span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">edd</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:0.7278em;vertical-align:-0.0833em;"></span><span class=mord >2.6</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >×</span><span class=mspace  style="margin-right:0.2222em;"></span></span><span class=base ><span class=strut  style="height:2.604em;vertical-align:-0.95em;"></span><span class=mord >1</span><span class=mord ><span class=mord >0</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">7</span></span></span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.1667em;"></span><span class=minner ><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:1.3603em;"><span style="top:-2.314em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >10</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.2583em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">⊙</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.2083em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">BH</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.8943em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class=mspace  style="margin-right:0.1667em;"></span><span class=minner ><span class=minner ><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:1.3603em;"><span style="top:-2.314em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >1.7</span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >1</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">s</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:1.654em;"><span style="top:-3.9029em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.1667em;"></span><span class=minner ><span class=minner ><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">(</span></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:1.1076em;"><span style="top:-2.314em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >0.1</span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">η</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">)</span></span></span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:1.354em;"><span style="top:-3.6029em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mspace  style="margin-right:0.1667em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.2583em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">⊙</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.2083em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mord ><span class=mord ><span class="mord mathrm">yr</span></span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class=mord >.</span></span></span></span></span> <p>In our MESA simulations we will consider that all mass transfer in excess of <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent=true ><mi>M</mi><mo>˙</mo></mover><mrow><mi mathvariant=normal >e</mi><mi mathvariant=normal >d</mi><mi mathvariant=normal >d</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\dot{M}_\mathrm{edd}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.0702em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord accent"><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.9202em;"><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span><span style="top:-3.2523em;"><span class=pstrut  style="height:3em;"></span><span class=accent-body  style="left:-0.0556em;"><span class=mord >˙</span></span></span></span></span></span></span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">edd</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is ejected from the vicinity of the black hole carrying its specific orbital angular momentum.</p> <h2 id=basic_structure_of_a_binary_work_directory ><a href="#basic_structure_of_a_binary_work_directory" class=header-anchor >Basic structure of a <code>binary</code> work directory</a></h2> <p>We will start by copying up an example working repository from MESA. You can do this from your terminal by running the following command from the directory where you want to setup this work directory</p> <pre><code class="bash hljs"><span class=hljs-built_in >cp</span> -r <span class=hljs-variable >$MESA_DIR</span>/binary/work template
<span class=hljs-built_in >cd</span> template
tree</code></pre> <p>the <code>tree</code> command shows all files contained within the current folder, its output should look like this:</p> <pre><code class="bash hljs">.
├── clean
├── inlist
├── inlist1
├── inlist2
├── inlist_project
├── make
│   └── makefile
├── mk
├── re
├── rn
└── src
    ├── binary_run.f90
    ├── run_binary_extras.f90
    └── run_star_extras.f90</code></pre> <p>As you can see, the structure of a <code>binary</code> work folder is similar to that of a <code>star</code>.</p> <h3 id=inlists_in_a_binary_work_folder ><a href="#inlists_in_a_binary_work_folder" class=header-anchor >Inlists in a <code>binary</code> work folder</a></h3> <p>The file <code>inlist_project</code> now contains options relevant to the binary system rather than each component. <code>inlist1</code> and <code>inlist2</code> are the inlists that are used for each component, and contain the same options you can use with single star simulations. Doing a sneak peek into <code>inlist_project</code> one finds the following:</p> <pre><code class="fortran hljs">&amp;binary_job

   inlist_names(<span class=hljs-number >1</span>) = <span class=hljs-string >&#x27;inlist1&#x27;</span> 
   inlist_names(<span class=hljs-number >2</span>) = <span class=hljs-string >&#x27;inlist2&#x27;</span>

   evolve_both_stars = .false.

/ <span class=hljs-comment >! end of binary_job namelist</span>

&amp;binary_controls
    
   m1 = <span class=hljs-number >1.0d0</span>  <span class=hljs-comment >! donor mass in Msun</span>
   m2 = <span class=hljs-number >1.4d0</span> <span class=hljs-comment >! companion mass in Msun</span>
   initial_period_in_days = <span class=hljs-number >2d0</span> 

   <span class=hljs-comment >!transfer efficiency controls</span>
   limit_retention_by_mdot_edd = .true.

   max_tries_to_achieve = <span class=hljs-number >20</span>
    
/ <span class=hljs-comment >! end of binary_controls namelist</span></code></pre> <p>You can check all options available in the files</p> <ul> <li><p><code>&#36;MESA_DIR/binary/defaults/binary_job.defaults</code></p> <li><p><code>&#36;MESA_DIR/binary/defaults/binary_controls.defaults</code></p> </ul> <p>In particular, the options included in <code>inlist_project</code> serve the following purpose</p> <ul> <li><p><code>inlist_names&#40;*&#41;</code>: The inlists of each star do not have hard-coded names and can be modified with this.</p> <li><p><code>evolve_both_stars</code>: If true, <code>MESA</code> will model both stars, otherwise star <code>2</code> will be set to a point mass. In this case inlist2 is ignored.</p> <li><p><code>m1</code>, <code>m2</code> and <code>initial_period_in_days</code>: The initial mass and period of the binary system. Default for eccentricity is zero.</p> <li><p><code>limit_retention_by_mdot</code>: If true, then the accretion rate is limited to <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent=true ><mi>M</mi><mo>˙</mo></mover><mrow><mi mathvariant=normal >e</mi><mi mathvariant=normal >d</mi><mi mathvariant=normal >d</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\dot{M}_\mathrm{edd}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.0702em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord accent"><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.9202em;"><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span><span style="top:-3.2523em;"><span class=pstrut  style="height:3em;"></span><span class=accent-body  style="left:-0.0556em;"><span class=mord >˙</span></span></span></span></span></span></span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">edd</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>. Excess transferred mass is ejected with the specific angular momentum of the point mass.</p> <li><p><code>max_tries_to_achieve</code>: Numerical option for the implicit mass transfer solver. This provides the number of iterations the solver will do.</p> </ul> <p>As you can see our simulation is already set up to model one of the components as a point mass with Eddington limited accretion</p> <p>One last important thing to note is that in inlist1 the <code>LOGS</code> directory is modified, in particular, inlist1 has:</p> <pre><code class="fortran hljs">&amp;controls

      extra_terminal_output_file = <span class=hljs-string >&#x27;log1&#x27;</span> 
      log_directory = <span class=hljs-string >&#x27;LOGS1&#x27;</span>

      ...

/ <span class=hljs-comment >! end of controls namelist</span></code></pre> <p>In cases where both stars are modeled this prevents a collision of output within the same directory.</p> <h3 id=the_src_folder_run_binary_extrasf90_and_run_star_extrasf90 ><a href="#the_src_folder_run_binary_extrasf90_and_run_star_extrasf90" class=header-anchor >The src folder: <code>run_binary_extras.f90</code> and <code>run_star_extras.f90</code></a></h3> <p>Another difference from a <code>star</code> work folder is the <code>run_binary_extras.f90</code> file in <code>src</code>. This file offers similar functionality to <code>run_star_extras.f90</code>, allowing for the inclusion of custom output, modified physics and termination conditions among others. For example, additional output from the binary system can be included through the following subroutines:</p> <pre><code class="fortran hljs"><span class=hljs-keyword >integer</span> <span class=hljs-function ><span class=hljs-keyword >function</span></span> how_many_extra_binary_history_columns(binary_id)
   <span class=hljs-keyword >use</span> binary_def, <span class=hljs-keyword >only</span>: binary_info
   <span class=hljs-keyword >integer</span>, <span class=hljs-keyword >intent</span>(<span class=hljs-keyword >in</span>) :: binary_id
   how_many_extra_binary_history_columns = <span class=hljs-number >0</span> 
<span class=hljs-keyword >end</span> <span class=hljs-function ><span class=hljs-keyword >function</span></span> how_many_extra_binary_history_columns

<span class=hljs-function ><span class=hljs-keyword >subroutine</span></span> data_for_extra_binary_history_columns(binary_id, n, names, vals, ierr)
   <span class=hljs-keyword >type</span> (binary_info), <span class=hljs-keyword >pointer</span> :: b
   <span class=hljs-keyword >integer</span>, <span class=hljs-keyword >intent</span>(<span class=hljs-keyword >in</span>) :: binary_id
   <span class=hljs-keyword >integer</span>, <span class=hljs-keyword >intent</span>(<span class=hljs-keyword >in</span>) :: n
   <span class=hljs-keyword >character</span> (len=maxlen_binary_history_column_name) :: names(n)
   <span class=hljs-keyword >real</span>(dp) :: vals(n)
   <span class=hljs-keyword >integer</span>, <span class=hljs-keyword >intent</span>(<span class=hljs-keyword >out</span>) :: ierr
   ierr = <span class=hljs-number >0</span> 
   <span class=hljs-keyword >call</span> binary_ptr(binary_id, b, ierr)
   <span class=hljs-keyword >if</span> (ierr /= <span class=hljs-number >0</span>) <span class=hljs-keyword >then</span>
      <span class=hljs-built_in >write</span>(*,*) <span class=hljs-string >&#x27;failed in binary_ptr&#x27;</span>
      <span class=hljs-keyword >return</span>
   <span class=hljs-keyword >end</span> <span class=hljs-keyword >if</span>

<span class=hljs-keyword >end</span> <span class=hljs-function ><span class=hljs-keyword >subroutine</span></span> data_for_extra_binary_history_columns</code></pre> <p>As there is a <code>star_info</code> type to contain information on a stellar model, there is a <code>binary_info</code> type that contains information specific to the binary system, such as its orbital period. The information contained within this type can be checked in the file <code>&#36;MESA_DIR/binary/public/binary_data.inc</code>. Some examples of useful values are:</p> <ul> <li><p><code>b&#37; mtransfer_rate</code>: The mass transfer rate from the donor to the accretor. Not all mass needs to be accreted though, and in particular we will study cases where mass transfer is very inneficient.</p> <li><p><code>b&#37; s1</code> and <code>b&#37; s2</code>: The <code>star_info</code> instances for each component. If only modeling one component, <code>b&#37; s2</code> will not be defined.</p> <li><p><code>b&#37; m&#40;1&#41;</code> and <code>b&#37; m&#40;2&#41;</code>: The mass of each component in grams.</p> <li><p><code>b&#37; xtra&#40;:&#41;</code>: Allows to store information. For instance, <code>b&#37; xtra&#40;1&#41;</code> could be used to store the time during which a specific condition in the simulation has been met. The benefit of using this over a global variable in <code>run_binary_extras.f90</code> is that <code>MESA</code> will automatically take care of it during restarts of simulations.</p> </ul> <h3 id=running_a_binary_model ><a href="#running_a_binary_model" class=header-anchor >Running a <code>binary</code> model</a></h3> <p>To run this work folder of <code>binary</code> one proceeds in the same way as in <code>star</code>:</p> <pre><code class="bash hljs">./mk
./rn | <span class=hljs-built_in >tee</span> out.txt</code></pre> <p>The <code>./mk</code> command is only needed when modifying the <code>run_*_extras</code> files, modification of inlist files does not require recompilation. Try running your work folder for a few &#40;at least 50&#41; steps and then stop the simulation by pressing <code>ctrl&#43;c</code> &#40;or however that is done in a mac, cmd&#43;c?&#41;. First thing you will notice is a significant amount of additional output, including both information for the star in the model as well as the binary system:</p> <pre><code class="julia hljs">__________________________________________________________________________________________________________________________________________________

       step    lg_Tmax     Teff     lg_LH      lg_Lnuc     Mass       H_rich     H_cntr     N_cntr     Y_surf   eta_cntr   zones  retry
  lg_dt_yrs    lg_Tcntr    lg_R     lg_L3a     lg_Lneu     lg_Mdot    He_core    He_cntr    O_cntr     Z_surf   gam_cntr   iters  
    age_yrs    lg_Dcntr    lg_L     lg_LZ      lg_Lphoto   lg_Dsurf   CO_core    C_cntr     Ne_cntr    Z_cntr   v_div_cs       dt_limit
__________________________________________________________________________________________________________________________________________________

         <span class=hljs-number >50</span>   <span class=hljs-number >7.147318</span>   <span class=hljs-number >5671.430</span>  -<span class=hljs-number >0.103097</span>  -<span class=hljs-number >0.103097</span>   <span class=hljs-number >1.000000</span>   <span class=hljs-number >1.000000</span>   <span class=hljs-number >0.600603</span>   <span class=hljs-number >0.005051</span>   <span class=hljs-number >0.280000</span>  -<span class=hljs-number >1.649360</span>    <span class=hljs-number >791</span>      <span class=hljs-number >0</span>
 <span class=hljs-number >7.8169E+00</span>   <span class=hljs-number >7.147318</span>  -<span class=hljs-number >0.036243</span> -<span class=hljs-number >45.850679</span>  -<span class=hljs-number >1.763204</span> -<span class=hljs-number >99.000000</span>   <span class=hljs-number >0.000000</span>   <span class=hljs-number >0.378831</span>   <span class=hljs-number >0.009337</span>   <span class=hljs-number >0.020000</span>   <span class=hljs-number >0.093456</span>     <span class=hljs-number >10</span>
 <span class=hljs-number >1.3577E+09</span>   <span class=hljs-number >1.982613</span>  -<span class=hljs-number >0.103022</span> -<span class=hljs-number >99.000000</span> -<span class=hljs-number >99.000000</span>  -<span class=hljs-number >6.735325</span>   <span class=hljs-number >0.000000</span>   <span class=hljs-number >0.000016</span>   <span class=hljs-number >0.002085</span>   <span class=hljs-number >0.020566</span>  <span class=hljs-number >0.000E+00</span>        b_jorb
__________________________________________________________________________________________________________________________________________________

binary_step      M1+M2      separ       Porb          e      M2/M1       pm_i    donor_i    dot_Mmt        eff       Jorb      dot_J    dot_Jmb
      lg_dt         M1         R1         P1      dot_e      vorb1        RL1    Rl_gap1     dot_M1   dot_Medd      spin1    dot_Jgr    dot_Jls
     age_yr         M2         R2         P2       Eorb      vorb2        RL2    Rl_gap2     dot_M2      L_acc      spin2    dot_Jml  rlo_iters
__________________________________________________________________________________________________________________________________________________

bin      <span class=hljs-number >50</span>   <span class=hljs-number >2.400000</span>   <span class=hljs-number >8.627141</span>   <span class=hljs-number >1.894689</span>  <span class=hljs-number >0.000E+00</span>   <span class=hljs-number >1.400000</span>          <span class=hljs-number >2</span>          <span class=hljs-number >1</span>  <span class=hljs-number >0.000E+00</span>   <span class=hljs-number >1.000000</span>  <span class=hljs-number >1.604E+52</span> -<span class=hljs-number >7.975E+33</span> -<span class=hljs-number >7.720E+33</span>
   <span class=hljs-number >7.816944</span>   <span class=hljs-number >1.000000</span>   <span class=hljs-number >0.919935</span>   <span class=hljs-number >0.000000</span>  <span class=hljs-number >0.000E+00</span> <span class=hljs-number >134.379739</span>   <span class=hljs-number >3.021149</span> -<span class=hljs-number >6.955E-01</span>  <span class=hljs-number >0.000E+00</span>  <span class=hljs-number >6.357E-08</span>  <span class=hljs-number >0.000E+00</span> -<span class=hljs-number >2.547E+32</span>  <span class=hljs-number >0.000E+00</span>
 <span class=hljs-number >1.3577E+09</span>   <span class=hljs-number >1.400000</span>   <span class=hljs-number >0.000000</span>   <span class=hljs-number >0.000000</span> -<span class=hljs-number >3.078E+47</span>  <span class=hljs-number >95.985528</span>   <span class=hljs-number >3.522940</span> -<span class=hljs-number >1.000E+00</span>  <span class=hljs-number >0.000E+00</span>  <span class=hljs-number >0.000E+00</span>  <span class=hljs-number >0.000E+00</span>  <span class=hljs-number >0.000E+00</span>          <span class=hljs-number >1</span></code></pre> <p>The file structure also shows some small differences compared to a <code>star</code> simulation, which you can check with the <code>tree</code> command</p> <pre><code class="bash hljs">.
├── binary
├── binary_history.data
├── clean
├── inlist
├── inlist1
├── inlist2
├── inlist_project
├── log1
├── LOGS1
│   ├── history.data
│   ├── pgstar.dat
│   ├── profile1.data
│   ├── profile2.data
│   └── profiles.index
├── make
│   ├── binary_run.o
│   ├── makefile
│   ├── run_binary_extras.mod
│   ├── run_binary_extras.o
│   ├── run_binary_extras.smod
│   ├── run_binary.mod
│   ├── run_binary.o
│   ├── run_star_extras.mod
│   ├── run_star_extras.o
│   └── run_star_extras.smod
├── mk
├── out.txt
├── photos
│   ├── 1_x050
│   └── b_x050
├── re
├── rn
└── src
    ├── binary_run.f90
    ├── run_binary_extras.f90
    └── run_star_extras.f90</code></pre> <p>Particularly important in here is the <code>binary_history.data</code> file, which contains information from the binary model in a similar format to history.data.</p> <pre><code class="julia hljs"><span class=hljs-number >1</span>                                <span class=hljs-number >2</span>                                <span class=hljs-number >3</span>                                <span class=hljs-number >4</span>                                <span class=hljs-number >5</span>                                <span class=hljs-number >6</span>                                <span class=hljs-number >7</span>                                <span class=hljs-number >8</span> 
                  version_number                 initial_don_mass                 initial_acc_mass              initial_period_days                         compiler                            build                 MESA_SDK_version                             date 
                      <span class=hljs-string >&quot;r22.05.1&quot;</span>          <span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.3999999999999999E+000</span>          <span class=hljs-number >2.0000000000000000E+000</span>                       <span class=hljs-string >&quot;gfortran&quot;</span>                         <span class=hljs-string >&quot;10.2.0&quot;</span>            <span class=hljs-string >&quot;x86_64-linux-21.4.1&quot;</span>                       <span class=hljs-string >&quot;20220623&quot;</span> 

                               <span class=hljs-number >1</span>                                <span class=hljs-number >2</span>                                <span class=hljs-number >3</span>                                <span class=hljs-number >4</span>                                <span class=hljs-number >5</span>                                <span class=hljs-number >6</span>                                <span class=hljs-number >7</span>                                <span class=hljs-number >8</span>                                <span class=hljs-number >9</span>                               <span class=hljs-number >10</span>                               <span class=hljs-number >11</span>                               <span class=hljs-number >12</span>                               <span class=hljs-number >13</span>                               <span class=hljs-number >14</span>                               <span class=hljs-number >15</span>                               <span class=hljs-number >16</span>                               <span class=hljs-number >17</span>                               <span class=hljs-number >18</span>                               <span class=hljs-number >19</span>                               <span class=hljs-number >20</span>                               <span class=hljs-number >21</span>                               <span class=hljs-number >22</span>                               <span class=hljs-number >23</span>                               <span class=hljs-number >24</span>                               <span class=hljs-number >25</span>                               <span class=hljs-number >26</span>                               <span class=hljs-number >27</span>                               <span class=hljs-number >28</span>                               <span class=hljs-number >29</span>                               <span class=hljs-number >30</span>                               <span class=hljs-number >31</span> 
                    model_number                              age                      period_days                binary_separation                          v_orb_1                          v_orb_2                             rl_1                             rl_2           rl_relative_overflow_1           rl_relative_overflow_2                      star_1_mass                      star_2_mass                lg_mtransfer_rate                   lg_mstar_dot_1                   lg_mstar_dot_2                 lg_system_mdot_1                 lg_system_mdot_2                   lg_wind_mdot_1                   lg_wind_mdot_2              fixed_xfer_fraction                eff_xfer_fraction                            J_orb                             Jdot                          jdot_mb                          jdot_gr                          jdot_ml                          jdot_ls                jdot_missing_wind                       extra_jdot                      donor_index                 point_mass_index 
                               <span class=hljs-number >5</span>          <span class=hljs-number >7.4416000000000000E+005</span>          <span class=hljs-number >1.9999980489355869E+000</span>          <span class=hljs-number >8.9439202746766693E+000</span>          <span class=hljs-number >1.3197852504643137E+002</span>          <span class=hljs-number >9.4270375033165308E+001</span>          <span class=hljs-number >3.1320820960887494E+000</span>          <span class=hljs-number >3.6522989775229004E+000</span>         -<span class=hljs-number >7.1732731040477715E-001</span>         -<span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.3999999999999997E+000</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>          <span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.6328981745087756E+052</span>         -<span class=hljs-number >2.2610479693263478E+032</span>          <span class=hljs-number >0.0000000000000000E+000</span>         -<span class=hljs-number >2.2610479693263478E+032</span>          <span class=hljs-number >0.0000000000000000E+000</span>          <span class=hljs-number >0.0000000000000000E+000</span>          <span class=hljs-number >0.0000000000000000E+000</span>          <span class=hljs-number >0.0000000000000000E+000</span>                                <span class=hljs-number >1</span>                                <span class=hljs-number >2</span> 
                              <span class=hljs-number >10</span>          <span class=hljs-number >2.5958682111999998E+006</span>          <span class=hljs-number >1.9999931940509912E+000</span>          <span class=hljs-number >8.9439058007564380E+000</span>          <span class=hljs-number >1.3197863183679308E+002</span>          <span class=hljs-number >9.4270451311995089E+001</span>          <span class=hljs-number >3.1320770274493812E+000</span>          <span class=hljs-number >3.6522930670180624E+000</span>         -<span class=hljs-number >7.1846295523455295E-001</span>         -<span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.3999999999999997E+000</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>          <span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.6328968532510521E+052</span>         -<span class=hljs-number >2.2610586415692399E+032</span>          <span class=hljs-number >0.0000000000000000E+000</span>         -<span class=hljs-number >2.2610586415692399E+032</span>          <span class=hljs-number >0.0000000000000000E+000</span>          <span class=hljs-number >0.0000000000000000E+000</span>          <span class=hljs-number >0.0000000000000000E+000</span>          <span class=hljs-number >0.0000000000000000E+000</span>                                <span class=hljs-number >1</span>                                <span class=hljs-number >2</span> 
                              <span class=hljs-number >15</span>          <span class=hljs-number >7.2035107872931827E+006</span>          <span class=hljs-number >1.9999811134701584E+000</span>          <span class=hljs-number >8.9438697847386237E+000</span>          <span class=hljs-number >1.3197889756852246E+002</span>          <span class=hljs-number >9.4270641120373199E+001</span>          <span class=hljs-number >3.1320644149571950E+000</span>          <span class=hljs-number >3.6522783596793333E+000</span>         -<span class=hljs-number >7.1804224478624690E-001</span>         -<span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.3999999999999997E+000</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>          <span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.6328935655095063E+052</span>         -<span class=hljs-number >2.2610851979732856E+032</span>          <span class=hljs-number >0.0000000000000000E+000</span>         -<span class=hljs-number >2.2610851979732856E+032</span>          <span class=hljs-number >0.0000000000000000E+000</span>          <span class=hljs-number >0.0000000000000000E+000</span>          <span class=hljs-number >0.0000000000000000E+000</span>          <span class=hljs-number >0.0000000000000000E+000</span>                                <span class=hljs-number >1</span>                                <span class=hljs-number >2</span> 
                              <span class=hljs-number >20</span>          <span class=hljs-number >1.8668799962237373E+007</span>          <span class=hljs-number >1.9999510526586048E+000</span>          <span class=hljs-number >8.9437801636730807E+000</span>          <span class=hljs-number >1.3197955881352075E+002</span>          <span class=hljs-number >9.4271113438229136E+001</span>          <span class=hljs-number >3.1320330304494854E+000</span>          <span class=hljs-number >3.6522417624248869E+000</span>         -<span class=hljs-number >7.1682239453910634E-001</span>         -<span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.3999999999999997E+000</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>         -<span class=hljs-number >9.8999999999999986E+001</span>          <span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.0000000000000000E+000</span>          <span class=hljs-number >1.6328853843736342E+052</span>         -<span class=hljs-number >2.2611512815823777E+032</span>          <span class=hljs-number >0.0000000000000000E+000</span>         -<span class=hljs-number >2.2611512815823777E+032</span>          <span class=hljs-number >0.0000000000000000E+000</span>          <span class=hljs-number >0.0000000000000000E+000</span>          <span class=hljs-number >0.0000000000000000E+000</span>          <span class=hljs-number >0.0000000000000000E+000</span>                                <span class=hljs-number >1</span>                                <span class=hljs-number >2</span></code></pre> <p>These data are also copied into the single star history file, <code>LOGS1/history.data</code>. This is just an internal workaround in the code to allow for information from the binary system to be included in pgstar plots. To change the information contained in <code>binary_history.data</code>, you can copy the file <code>&#36;MESA_DIR/binary/defaults/binary_history_columns.list</code> to your work folder and comment/uncomment the necessary fields. Alternatively, new fields can be added with the subroutines of <code>run_binary_extras</code> that where mentioned previously.</p> <p>Also from the files shown above, you can see that the <code>photos</code>, which are needed to restart simulations, are stored differently from <code>star</code>. For each saved timestep a photo is saved containing the information of each star modeled, as well as one from the binary system. To restart a simulation from step 50, you can then do.</p> <pre><code class="bash hljs">./re x050 | <span class=hljs-built_in >tee</span> outre.txt</code></pre>
<p>The tee command is just a convenient way to store the terminal output in a file while still displaying it in the terminal.</p>
<h2 id=adjusting_the_work_directory ><a href="#adjusting_the_work_directory" class=header-anchor >Adjusting the work directory</a></h2>
<p>Next we will perform some adjustments to the template. A significant number of these are meant to make the simulation faster in order to be efficiently computed in the duration of this lab.</p>
<h3 id=modifications_to_binary_controls_section_of_inlist_project ><a href="#modifications_to_binary_controls_section_of_inlist_project" class=header-anchor >Modifications to <code>@binary_controls</code> section of <code>inlist_project</code></a></h3>
<p>We will first consider a system of a massive star with a black hole companion in an orbit wide enough for interaction to happen after the main-sequence. For this we modify the values of <code>m1</code>, <code>m2</code> and <code>initial_period_in_days</code>:</p>
<pre><code class="fortran hljs">m1 = <span class=hljs-number >30d0</span>  <span class=hljs-comment >! donor mass in Msun</span>
m2 = <span class=hljs-number >20d0</span> <span class=hljs-comment >! companion mass in Msun</span>
initial_period_in_days = <span class=hljs-number >50d0</span></code></pre>
<p>By default MESA also includes the effect of magnetic braking for angular momentum loss. This implementation is meant for late type stars and should be removed when working with massive binaries, for that purpose you can include:</p>
<pre><code class="fortran hljs">do_jdot_mb = .false.</code></pre>
<p>Finally, to run the simulation faster we will relax multiple timestepping controls of the binary module by including:</p>
<pre><code class="fortran hljs"><span class=hljs-comment >! relax timestep controls</span>
fm = <span class=hljs-number >0.1d0</span>
fa = <span class=hljs-number >0.02d0</span>
fa_hard = <span class=hljs-number >0.04d0</span>
fr = <span class=hljs-number >0.5d0</span>
fj = <span class=hljs-number >0.01d0</span>
fj_hard = <span class=hljs-number >0.02d0</span></code></pre>
<p>The exact purpose of each of these controls can be checked in the defaults file mentioned previously. Contrary to <code>star</code> there is not a single <code>time_delta_coeff</code> control to easily scale all timesteps, but this will be provided at some point in future versions.</p>
<h3 id=modifications_to_controls_section_of_inlist1 ><a href="#modifications_to_controls_section_of_inlist1" class=header-anchor >Modifications to <code>@controls</code> section of <code>inlist1</code></a></h3>
<p>Next we will modify the settings for the star that will be modeled. We will start by including wind mass loss, which is an important ingredient while modeling massive stars:</p>
<pre><code class="fortran hljs"><span class=hljs-comment >! mass loss options</span>
cool_wind_full_on_T = <span class=hljs-number >0.8d4</span>
hot_wind_full_on_T = <span class=hljs-number >1.2d4</span>
cool_wind_RGB_scheme = <span class=hljs-string >&#x27;Dutch&#x27;</span>
cool_wind_AGB_scheme = <span class=hljs-string >&#x27;Dutch&#x27;</span>
hot_wind_scheme = <span class=hljs-string >&#x27;Dutch&#x27;</span>
Dutch_wind_lowT_scheme = <span class=hljs-string >&#x27;de Jager&#x27;</span>
Dutch_scaling_factor = <span class=hljs-number >1.0d0</span></code></pre>
<p>Here we have included the <code>Dutch</code> prescription of mass loss that is coded in <code>MESA</code>. Beware that this prescription is just a combination of various published prescriptions that are designed for different stars. If you ever use the <code>Dutch</code> prescription in a published paper be aware that <strong> <span style="color:red"> it is not ok</span></strong> to describe your mass loss as &quot;the Dutch scheme from MESA&quot;, you need to give proper credit to the individual prescriptions it uses. In particular for the above options winds will be computed as a combination of the prescriptions from de <a href="https://ui.adsabs.harvard.edu/abs/1988A&#37;26AS...72..259D/abstract">Jager et al. &#40;1988&#41;</a>,  <a href="https://ui.adsabs.harvard.edu/abs/2000A&#37;26A...360..227N/abstract">Nugis &amp; Lamers &#40;2000&#41;</a> and <a href="https://ui.adsabs.harvard.edu/abs/2001A&#37;26A...369..574V/abstract">Vink et al. &#40;2001&#41;</a>.</p>
<p>Massive stars are also expected to have strong overshooting from their convective cores. We include some options for this, as well as to use the Ledoux criterion to determine convective boundaries &#40;the amount of overshooting chosen follows the calibration of <a href="https://ui.adsabs.harvard.edu/abs/2011A&#37;26A...530A.115B/abstract">Brott et al. &#40;2011&#41;</a>&#41;:</p>
<pre><code class="fortran hljs"><span class=hljs-comment >! we use step overshooting</span>
overshoot_scheme(<span class=hljs-number >1</span>) = <span class=hljs-string >&#x27;step&#x27;</span>
overshoot_zone_type(<span class=hljs-number >1</span>) = <span class=hljs-string >&#x27;burn_H&#x27;</span>
overshoot_zone_loc(<span class=hljs-number >1</span>) = <span class=hljs-string >&#x27;core&#x27;</span>
overshoot_bdy_loc(<span class=hljs-number >1</span>) = <span class=hljs-string >&#x27;top&#x27;</span>
overshoot_f(<span class=hljs-number >1</span>) = <span class=hljs-number >0.345</span>
overshoot_f0(<span class=hljs-number >1</span>) = <span class=hljs-number >0.01</span>

use_ledoux_criterion = .true.
alpha_semiconvection = <span class=hljs-number >1d0</span></code></pre>
<p>As modeling evolution all the way to core collapse is expensive, we will only follow it until core helium depletion:</p>
<pre><code class="fortran hljs"><span class=hljs-comment >! stop when the center mass fraction of h1 drops below this limit</span>
xa_central_lower_limit_species(<span class=hljs-number >1</span>) = <span class=hljs-string >&#x27;he4&#x27;</span>
xa_central_lower_limit(<span class=hljs-number >1</span>) = <span class=hljs-number >1d-3</span></code></pre>
<p>For the simulations we will significantly reduce the resolution and reduce the tolerance of the solver. This is only meant to make these labs faster and reduce the time you spend simply watching a screen, <strong> <span style="color:red"> doing this for a simulation meant for publication is not advised</span></strong>.</p>
<pre><code class="fortran hljs"><span class=hljs-comment >! reduce resolution and solver tolerance to make runs faster</span>
mesh_delta_coeff = <span class=hljs-number >3d0</span>
time_delta_coeff = <span class=hljs-number >3d0</span>
varcontrol_target = <span class=hljs-number >1d-2</span>
use_gold2_tolerances = .false.
use_gold_tolerances = .true.</code></pre>
<p>And we will also include some adjustments to the solver. These options can reduce changes in individual solver iterations and help it find solutions, unlike the relaxed tolerance from the options above these options can be a good option to work out solver issues in publication-quality runs:</p>
<pre><code class="fortran hljs"><span class=hljs-comment >! Use scaled corrections to aid the solver</span>
scale_max_correction = <span class=hljs-number >0.1d0</span>
ignore_min_corr_coeff_for_scale_max_correction = .true.
ignore_species_in_max_correction = .true.
scale_max_correction_for_negative_surf_lum = .true.</code></pre>
<h3 id=modifications_to_pgstar_section_of_inlist1 ><a href="#modifications_to_pgstar_section_of_inlist1" class=header-anchor >Modifications to <code>@pgstar</code> section of <code>inlist1</code></a></h3>
<p>For pgstar here is a pre-made grid that will show most of what you need. You can also include <code>pause_before_terminate &#61; .false.</code> in <code>@star_job</code> so that your pgstar plot does not vanish at the end of the run. Every 100 steps the output will be saved in the folder <code>png1</code>.</p>
<button type=button  class=collapsible >  Content for <code>@pgstar</code>, <strong>press to expand</strong> </button><div class=collapsiblecontent >  </p>
<pre><code class="fortran hljs">pgstar_interval = <span class=hljs-number >1</span>

pgstar_age_disp = <span class=hljs-number >2.5</span>
pgstar_model_disp = <span class=hljs-number >2.5</span>

<span class=hljs-comment >!### scale for axis labels</span>
pgstar_xaxis_label_scale = <span class=hljs-number >1.3</span>
pgstar_left_yaxis_label_scale = <span class=hljs-number >1.3</span>
pgstar_right_yaxis_label_scale = <span class=hljs-number >1.3</span>

Grid2_win_flag = .true.

Grid2_win_width = <span class=hljs-number >15</span>
Grid2_win_aspect_ratio = <span class=hljs-number >0.65</span> <span class=hljs-comment >! aspect_ratio = height/width</span>

Grid2_plot_name(<span class=hljs-number >4</span>) = <span class=hljs-string >&#x27;Mixing&#x27;</span>

Grid2_num_cols = <span class=hljs-number >7</span> <span class=hljs-comment >! divide plotting region into this many equal width cols</span>
Grid2_num_rows = <span class=hljs-number >8</span> <span class=hljs-comment >! divide plotting region into this many equal height rows</span>
Grid2_num_plots = <span class=hljs-number >6</span> <span class=hljs-comment >! &lt;= 10</span>

Grid2_plot_name(<span class=hljs-number >1</span>) = <span class=hljs-string >&#x27;TRho_Profile&#x27;</span>
Grid2_plot_row(<span class=hljs-number >1</span>) = <span class=hljs-number >1</span> <span class=hljs-comment >! number from 1 at top</span>
Grid2_plot_rowspan(<span class=hljs-number >1</span>) = <span class=hljs-number >3</span> <span class=hljs-comment >! plot spans this number of rows</span>
Grid2_plot_col(<span class=hljs-number >1</span>) =  <span class=hljs-number >1</span> <span class=hljs-comment >! number from 1 at left</span>
Grid2_plot_colspan(<span class=hljs-number >1</span>) = <span class=hljs-number >2</span> <span class=hljs-comment >! plot spans this number of columns </span>
Grid2_plot_pad_left(<span class=hljs-number >1</span>) = -<span class=hljs-number >0.05</span> <span class=hljs-comment >! fraction of full window width for padding on left</span>
Grid2_plot_pad_right(<span class=hljs-number >1</span>) = <span class=hljs-number >0.01</span> <span class=hljs-comment >! fraction of full window width for padding on right</span>
Grid2_plot_pad_top(<span class=hljs-number >1</span>) = <span class=hljs-number >0.00</span> <span class=hljs-comment >! fraction of full window height for padding at top</span>
Grid2_plot_pad_bot(<span class=hljs-number >1</span>) = <span class=hljs-number >0.05</span> <span class=hljs-comment >! fraction of full window height for padding at bottom</span>
Grid2_txt_scale_factor(<span class=hljs-number >1</span>) = <span class=hljs-number >0.65</span> <span class=hljs-comment >! multiply txt_scale for subplot by this</span>


Grid2_plot_name(<span class=hljs-number >5</span>) = <span class=hljs-string >&#x27;Kipp&#x27;</span>
Grid2_plot_row(<span class=hljs-number >5</span>) = <span class=hljs-number >4</span> <span class=hljs-comment >! number from 1 at top</span>
Grid2_plot_rowspan(<span class=hljs-number >5</span>) = <span class=hljs-number >3</span> <span class=hljs-comment >! plot spans this number of rows</span>
Grid2_plot_col(<span class=hljs-number >5</span>) =  <span class=hljs-number >1</span> <span class=hljs-comment >! number from 1 at left</span>
Grid2_plot_colspan(<span class=hljs-number >5</span>) = <span class=hljs-number >2</span> <span class=hljs-comment >! plot spans this number of columns </span>
Grid2_plot_pad_left(<span class=hljs-number >5</span>) = -<span class=hljs-number >0.05</span> <span class=hljs-comment >! fraction of full window width for padding on left</span>
Grid2_plot_pad_right(<span class=hljs-number >5</span>) = <span class=hljs-number >0.01</span> <span class=hljs-comment >! fraction of full window width for padding on right</span>
Grid2_plot_pad_top(<span class=hljs-number >5</span>) = <span class=hljs-number >0.03</span> <span class=hljs-comment >! fraction of full window height for padding at top</span>
Grid2_plot_pad_bot(<span class=hljs-number >5</span>) = <span class=hljs-number >0.0</span> <span class=hljs-comment >! fraction of full window height for padding at bottom</span>
Grid2_txt_scale_factor(<span class=hljs-number >5</span>) = <span class=hljs-number >0.65</span> <span class=hljs-comment >! multiply txt_scale for subplot by this</span>
Kipp_title = <span class=hljs-string >&#x27;&#x27;</span>
Kipp_show_mass_boundaries = .true.

Grid2_plot_name(<span class=hljs-number >6</span>) = <span class=hljs-string >&#x27;HR&#x27;</span>
HR_title = <span class=hljs-string >&#x27;&#x27;</span>
Grid2_plot_row(<span class=hljs-number >6</span>) = <span class=hljs-number >7</span> <span class=hljs-comment >! number from 1 at top</span>
Grid2_plot_rowspan(<span class=hljs-number >6</span>) = <span class=hljs-number >2</span> <span class=hljs-comment >! plot spans this number of rows</span>
Grid2_plot_col(<span class=hljs-number >6</span>) =  <span class=hljs-number >6</span> <span class=hljs-comment >! number from 1 at left</span>
Grid2_plot_colspan(<span class=hljs-number >6</span>) = <span class=hljs-number >2</span> <span class=hljs-comment >! plot spans this number of columns </span>

Grid2_plot_pad_left(<span class=hljs-number >6</span>) = <span class=hljs-number >0.05</span> <span class=hljs-comment >! fraction of full window width for padding on left</span>
Grid2_plot_pad_right(<span class=hljs-number >6</span>) = -<span class=hljs-number >0.01</span> <span class=hljs-comment >! fraction of full window width for padding on right</span>
Grid2_plot_pad_top(<span class=hljs-number >6</span>) = <span class=hljs-number >0.0</span> <span class=hljs-comment >! fraction of full window height for padding at top</span>
Grid2_plot_pad_bot(<span class=hljs-number >6</span>) = <span class=hljs-number >0.0</span> <span class=hljs-comment >! fraction of full window height for padding at bottom</span>
Grid2_txt_scale_factor(<span class=hljs-number >6</span>) = <span class=hljs-number >0.65</span> <span class=hljs-comment >! multiply txt_scale for subplot by this</span>

History_Panels1_title = <span class=hljs-string >&#x27;&#x27;</span>      
History_Panels1_num_panels = <span class=hljs-number >3</span>

History_Panels1_xaxis_name=<span class=hljs-string >&#x27;model_number&#x27;</span>
History_Panels1_max_width = -<span class=hljs-number >1</span> <span class=hljs-comment >! only used if &gt; 0.  causes xmin to move with xmax.</span>

History_Panels1_yaxis_name(<span class=hljs-number >1</span>) = <span class=hljs-string >&#x27;period_days&#x27;</span> 
History_Panels1_other_yaxis_name(<span class=hljs-number >1</span>) = <span class=hljs-string >&#x27;&#x27;</span>
History_Panels1_yaxis_log(<span class=hljs-number >1</span>) = .true.
History_Panels1_yaxis_reversed(<span class=hljs-number >1</span>) = .false.
History_Panels1_ymin(<span class=hljs-number >1</span>) = -<span class=hljs-number >101d0</span> <span class=hljs-comment >! only used if /= -101d0</span>
History_Panels1_ymax(<span class=hljs-number >1</span>) = -<span class=hljs-number >101d0</span> <span class=hljs-comment >! only used if /= -101d0        </span>
<span class=hljs-comment >!History_Panels1_dymin(1) = 0.1 </span>

History_Panels1_yaxis_name(<span class=hljs-number >2</span>) = <span class=hljs-string >&#x27;lg_mtransfer_rate&#x27;</span> <span class=hljs-comment >!</span>
History_Panels1_yaxis_reversed(<span class=hljs-number >2</span>) = .false.
History_Panels1_ymin(<span class=hljs-number >2</span>) = -<span class=hljs-number >8d0</span> <span class=hljs-comment >! only used if /= -101d0</span>
History_Panels1_ymax(<span class=hljs-number >2</span>) = -<span class=hljs-number >2d0</span> <span class=hljs-comment >! only used if /= -101d0        </span>
History_Panels1_dymin(<span class=hljs-number >2</span>) = <span class=hljs-number >1</span> 

History_Panels1_other_yaxis_name(<span class=hljs-number >2</span>) = <span class=hljs-string >&#x27;log_abs_mdot&#x27;</span> 
History_Panels1_other_yaxis_reversed(<span class=hljs-number >2</span>) = .false.
History_Panels1_other_ymin(<span class=hljs-number >2</span>) = -<span class=hljs-number >8d0</span> <span class=hljs-comment >! only used if /= -101d0</span>
History_Panels1_other_ymax(<span class=hljs-number >2</span>) = -<span class=hljs-number >2d0</span> <span class=hljs-comment >! only used if /= -101d0        </span>
History_Panels1_other_dymin(<span class=hljs-number >2</span>) = <span class=hljs-number >1</span> 

History_Panels1_yaxis_name(<span class=hljs-number >3</span>) = <span class=hljs-string >&#x27;rl_relative_overflow_1&#x27;</span>
History_Panels1_other_yaxis_name(<span class=hljs-number >3</span>) = <span class=hljs-string >&#x27;&#x27;</span>
History_Panels1_yaxis_reversed(<span class=hljs-number >3</span>) = .false.

Grid2_plot_name(<span class=hljs-number >2</span>) = <span class=hljs-string >&#x27;Text_Summary1&#x27;</span>
Grid2_plot_row(<span class=hljs-number >2</span>) = <span class=hljs-number >7</span> <span class=hljs-comment >! number from 1 at top</span>
Grid2_plot_rowspan(<span class=hljs-number >2</span>) = <span class=hljs-number >2</span> <span class=hljs-comment >! plot spans this number of rows</span>
Grid2_plot_col(<span class=hljs-number >2</span>) = <span class=hljs-number >1</span> <span class=hljs-comment >! number from 1 at left</span>
Grid2_plot_colspan(<span class=hljs-number >2</span>) = <span class=hljs-number >4</span> <span class=hljs-comment >! plot spans this number of columns </span>
Grid2_plot_pad_left(<span class=hljs-number >2</span>) = -<span class=hljs-number >0.08</span> <span class=hljs-comment >! fraction of full window width for padding on left</span>
Grid2_plot_pad_right(<span class=hljs-number >2</span>) = -<span class=hljs-number >0.10</span> <span class=hljs-comment >! fraction of full window width for padding on right</span>
Grid2_plot_pad_top(<span class=hljs-number >2</span>) = <span class=hljs-number >0.08</span> <span class=hljs-comment >! fraction of full window height for padding at top</span>
Grid2_plot_pad_bot(<span class=hljs-number >2</span>) = -<span class=hljs-number >0.04</span> <span class=hljs-comment >! fraction of full window height for padding at bottom</span>
Grid2_txt_scale_factor(<span class=hljs-number >2</span>) = <span class=hljs-number >0.19</span> <span class=hljs-comment >! multiply txt_scale for subplot by this</span>
Text_Summary1_name(<span class=hljs-number >7</span>,<span class=hljs-number >1</span>) = <span class=hljs-string >&#x27;period_days&#x27;</span>
Text_Summary1_name(<span class=hljs-number >8</span>,<span class=hljs-number >1</span>) = <span class=hljs-string >&#x27;star_2_mass&#x27;</span>

Grid2_plot_name(<span class=hljs-number >3</span>) = <span class=hljs-string >&#x27;Profile_Panels3&#x27;</span>
Profile_Panels3_title = <span class=hljs-string >&#x27;Abundance-Power-Mixing&#x27;</span>
Profile_Panels3_num_panels = <span class=hljs-number >3</span>
Profile_Panels3_yaxis_name(<span class=hljs-number >1</span>) = <span class=hljs-string >&#x27;Abundance&#x27;</span>
Profile_Panels3_yaxis_name(<span class=hljs-number >2</span>) = <span class=hljs-string >&#x27;Power&#x27;</span>
Profile_Panels3_yaxis_name(<span class=hljs-number >3</span>) = <span class=hljs-string >&#x27;Mixing&#x27;</span>

Profile_Panels3_xaxis_name = <span class=hljs-string >&#x27;mass&#x27;</span>
Profile_Panels3_xaxis_reversed = .false.

Grid2_plot_row(<span class=hljs-number >3</span>) = <span class=hljs-number >1</span> <span class=hljs-comment >! number from 1 at top</span>
Grid2_plot_rowspan(<span class=hljs-number >3</span>) = <span class=hljs-number >6</span> <span class=hljs-comment >! plot spans this number of rows</span>
Grid2_plot_col(<span class=hljs-number >3</span>) = <span class=hljs-number >3</span> <span class=hljs-comment >! plot spans this number of columns </span>
Grid2_plot_colspan(<span class=hljs-number >3</span>) = <span class=hljs-number >3</span> <span class=hljs-comment >! plot spans this number of columns </span>

Grid2_plot_pad_left(<span class=hljs-number >3</span>) = <span class=hljs-number >0.09</span> <span class=hljs-comment >! fraction of full window width for padding on left</span>
Grid2_plot_pad_right(<span class=hljs-number >3</span>) = <span class=hljs-number >0.07</span> <span class=hljs-comment >! fraction of full window width for padding on right</span>
Grid2_plot_pad_top(<span class=hljs-number >3</span>) = <span class=hljs-number >0.0</span> <span class=hljs-comment >! fraction of full window height for padding at top</span>
Grid2_plot_pad_bot(<span class=hljs-number >3</span>) = <span class=hljs-number >0.0</span> <span class=hljs-comment >! fraction of full window height for padding at bottom</span>
Grid2_txt_scale_factor(<span class=hljs-number >3</span>) = <span class=hljs-number >0.65</span> <span class=hljs-comment >! multiply txt_scale for subplot by this</span>

Grid2_plot_name(<span class=hljs-number >4</span>) = <span class=hljs-string >&#x27;History_Panels1&#x27;</span>
Grid2_plot_row(<span class=hljs-number >4</span>) = <span class=hljs-number >1</span> <span class=hljs-comment >! number from 1 at top</span>
Grid2_plot_rowspan(<span class=hljs-number >4</span>) = <span class=hljs-number >6</span> <span class=hljs-comment >! plot spans this number of rows</span>
Grid2_plot_col(<span class=hljs-number >4</span>) =  <span class=hljs-number >6</span> <span class=hljs-comment >! number from 1 at left</span>
Grid2_plot_colspan(<span class=hljs-number >4</span>) = <span class=hljs-number >2</span> <span class=hljs-comment >! plot spans this number of columns </span>
Grid2_plot_pad_left(<span class=hljs-number >4</span>) = <span class=hljs-number >0.05</span> <span class=hljs-comment >! fraction of full window width for padding on left</span>
Grid2_plot_pad_right(<span class=hljs-number >4</span>) = <span class=hljs-number >0.03</span> <span class=hljs-comment >! fraction of full window width for padding on right</span>
Grid2_plot_pad_top(<span class=hljs-number >4</span>) = <span class=hljs-number >0.0</span> <span class=hljs-comment >! fraction of full window height for padding at top</span>
Grid2_plot_pad_bot(<span class=hljs-number >4</span>) = <span class=hljs-number >0.07</span> <span class=hljs-comment >! fraction of full window height for padding at bottom</span>
Grid2_txt_scale_factor(<span class=hljs-number >4</span>) = <span class=hljs-number >0.65</span> <span class=hljs-comment >! multiply txt_scale for subplot by this</span>

Grid2_file_flag = .true.
Grid2_file_dir = <span class=hljs-string >&#x27;png1&#x27;</span>
Grid2_file_prefix = <span class=hljs-string >&#x27;grid_&#x27;</span>
Grid2_file_interval = <span class=hljs-number >100</span> <span class=hljs-comment >! 1 ! output when mod(model_number,Grid2_file_interval)==0</span>
Grid2_file_width = -<span class=hljs-number >1</span> <span class=hljs-comment >! negative means use same value as for window</span>
Grid2_file_aspect_ratio = -<span class=hljs-number >1</span> <span class=hljs-comment >! negative means use same value as for window</span></code></pre>
<p></div>
<p>In order for the Kippenhahn diagram to show up in the simulation one needs to add additional input to the history file. For this purpose, copy the <code>history_columns.list</code> file into your work directory:</p>
<pre><code class="bash hljs"><span class=hljs-built_in >cp</span> <span class=hljs-variable >$MESA_DIR</span>/star/defaults/history_columns.list .</code></pre>
<p>In the file look for the <code>mixing_regions</code> option, and above it add a line saying <code>mixing_regions 10</code>. Specifically, the file will originally look like this:</p>
<pre><code class="fortran hljs"><span class=hljs-comment >! you might want to get a more complete list of mixing regions by using the following</span>

<span class=hljs-comment >!mixing_regions &lt;integer&gt; ! <span class=hljs-doctag >note:</span> this includes regions where the mixing type is no_mixing.</span>

   <span class=hljs-comment >! the &lt;integer&gt; is the number of regions to report</span>
   <span class=hljs-comment >! there will be 2*&lt;integer&gt; columns for this in the log file, 2 for each region.</span>
   <span class=hljs-comment >! the first column for a region gives the mixing type as defined in const/public/const_def.f90.</span></code></pre>
<p>and after editing it will look like this:</p>
<pre><code class="fortran hljs"><span class=hljs-comment >! you might want to get a more complete list of mixing regions by using the following</span>
mixing regions <span class=hljs-number >10</span>
<span class=hljs-comment >!mixing_regions &lt;integer&gt; ! <span class=hljs-doctag >note:</span> this includes regions where the mixing type is no_mixing.</span>

   <span class=hljs-comment >! the &lt;integer&gt; is the number of regions to report</span>
   <span class=hljs-comment >! there will be 2*&lt;integer&gt; columns for this in the log file, 2 for each region.</span>
   <span class=hljs-comment >! the first column for a region gives the mixing type as defined in const/public/const_def.f90.</span></code></pre>
<h2 id=onto_the_minilab ><a href="#onto_the_minilab" class=header-anchor >Onto the minilab&#33;</a></h2>
<div class=page-foot >
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Pablo Marchant. Last modified: June 23, 2022.
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
</div>
<script>
    var coll = document.getElementsByClassName("collapsible");
    var i;
  
    for (i = 0; i < coll.length; i++) {
      coll[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var content = this.nextElementSibling;
        if (content.style.display === "block") {
          content.style.display = "none";
        } else {
          content.style.display = "block";
        }
      });
    }
  </script></div>
    </div>